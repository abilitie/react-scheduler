module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t){e.exports=require("react/jsx-runtime")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("@mui/material")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@mui/lab/DatePicker")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("@mui/icons-material/NavigateNextRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowRightRounded")},function(e,t){e.exports=require("@mui/icons-material/ArrowLeftRounded")},function(e,t){e.exports=require("@mui/icons-material/NavigateBeforeRounded")},function(e,t){e.exports=require("date-fns/locale/en-US")},function(e,t){e.exports=require("@mui/icons-material/EditRounded")},function(e,t){e.exports=require("@mui/icons-material/DeleteRounded")},function(e,t){e.exports=require("@mui/icons-material/EventNoteRounded")},function(e,t){e.exports=require("@mui/icons-material/ClearRounded")},function(e,t){e.exports=require("@mui/icons-material/SupervisorAccountRounded")},function(e,t){e.exports=require("@mui/material/styles")},function(e,t){e.exports=require("@mui/lab/LocalizationProvider")},function(e,t){e.exports=require("@mui/lab/AdapterDateFns")},function(e,t){e.exports=require("@mui/icons-material/MoreVert")},function(e,t){e.exports=require("@mui/lab/DateTimePicker")},function(e,t){e.exports=require("@mui/icons-material/ExpandMore")},function(e,t,n){"use strict";n.r(t),n.d(t,"Scheduler",(function(){return Ne}));var i=n(0),r=n(3),a=n(1);const s=(e,t,n)=>{var i;const r=(null===(i=e.config)||void 0===i?void 0:i.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),a=r?t?[t]:[]:t;return{value:a,validity:r?a.length:a}},o=(e,t,n,i)=>{var r;const a=n.idField,s=i.find(e=>e.name===a),o=!!(null===(r=null==s?void 0:s.config)||void 0===r?void 0:r.multiple);let c=[];for(const i of e){const e=o&&!Array.isArray(i[a])?[i[a]]:i[a];(o?e.includes(t[a]):e===t[a])&&c.push(Object.assign(Object.assign({},i),{color:i.color||t[n.colorField||""]}))}return c},c=(e,t)=>Math.ceil(e)/t,d=(e,t)=>Math.max(e/t,60);var l=n(10),j=n.n(l);const u={height:600,month:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17},week:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17,step:60},day:{startHour:9,endHour:17,step:60},view:"week",selectedDate:new Date,events:[],remoteEvents:void 0,fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceFields:{idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:j.a},b=Object(r.createContext)(Object.assign(Object.assign({},u),{mounted:!1,dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}})),v=(e,t)=>{switch(t.type){case"updateProps":return Object.assign(Object.assign({},e),t.payload);case"set":const{name:n,value:i}=t.payload;return Object.assign(Object.assign({},e),{[n]:i});case"triggerDialog":const r=t.payload.selected;return Object.assign(Object.assign({},e),{dialog:t.payload.status,selectedRange:(null==r?void 0:r.event_id)?null:r,selectedEvent:(null==r?void 0:r.event_id)?r:null});case"triggerLoading":return Object.assign(Object.assign({},e),{loading:t.payload});default:return e}};var O=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const h=e=>{const t=e.view&&e[e.view]?e.view:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(e);return Object.assign(Object.assign({},e),{view:t,dialog:!1,mounted:!1,selectedRange:void 0,fields:[...u.fields,...e.fields||[]]})},p=({initial:e,children:t})=>{const{events:n,resources:o,resourceViewMode:c,month:d,week:l,day:j,fields:u,locale:p,direction:g,loading:y,onEventDrop:f,onChangeView:m}=e,[x,w]=Object(r.useReducer)(v,h(e)),_=(e,t)=>{m&&"view"===t&&"string"==typeof e&&m(e),w({type:"set",payload:{name:t,value:e}})};Object(r.useEffect)(()=>{x.mounted?w({type:"updateProps",payload:{events:n,resources:o,resourceViewMode:c,month:d,week:l,day:j,fields:u,locale:p,direction:g,loading:y}}):_(!0,"mounted")},[n,o,c,d,l,j,u,p,g,y]);const D=(e,t)=>{let n;n="edit"===t?x.events.map(t=>t.event_id===e.event_id?e:t):[...x.events,e],_(n,"events")},C=()=>(e=>{let t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(x),k=e=>{void 0===y&&w({type:"triggerLoading",payload:e})};return Object(i.jsx)(b.Provider,Object.assign({value:Object.assign(Object.assign({},x),{handleState:_,getViews:C,triggerDialog:(e,t)=>{w({type:"triggerDialog",payload:{status:e,selected:t}})},triggerLoading:k,handleGotoDay:e=>{const t=C();t.includes("day")?(_("day","view"),_(e,"selectedDate")):t.includes("week")?(_("week","view"),_(e,"selectedDate")):console.warn("No Day/Week views available")},confirmEvent:D,onDrop:(e,t,n,i)=>O(void 0,void 0,void 0,(function*(){var r;const o=x.events.find(t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e),c=x.fields.find(e=>e.name===n),d=!!(null===(r=null==c?void 0:c.config)||void 0===r?void 0:r.multiple);let l=i;if(c){const e=o[n],r=s(c,e,o).value;if(d)if(r.includes(i)){if(Object(a.isEqual)(o.start,t))return;l=r}else l=r.length>1?[...r,i]:[i]}if(Object(a.isEqual)(o.start,t)&&(!l||!d&&l===o[n]))return;const j=Object(a.differenceInMinutes)(o.end,o.start),u=Object.assign(Object.assign({},o),{start:t,end:Object(a.addMinutes)(t,j),[n]:l||""});if(!f||"function"!=typeof f)return D(u,"edit");try{k(!0);const e=yield f(t,u,o);e&&D(e,"edit")}finally{k(!1)}}))})},{children:t}),void 0)};var g=n(2);var y=({date:e,onClick:t,locale:n})=>Object(i.jsxs)("div",{children:[Object(i.jsx)(g.Typography,Object.assign({style:{fontWeight:Object(a.isToday)(e)?"bold":"inherit"},color:Object(a.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:Object(a.format)(e,"dd",{locale:n})}),void 0),Object(i.jsx)(g.Typography,Object.assign({color:Object(a.isToday)(e)?"primary":"inherit",style:{fontWeight:Object(a.isToday)(e)?"bold":"inherit",fontSize:11}},{children:Object(a.format)(e,"eee",{locale:n})}),void 0)]},void 0);const f=()=>Object(r.useContext)(b);var m=n(7),x=n.n(m),w=n(8),_=n.n(w),D=n(11),C=n.n(D),k=n(12),M=n.n(k),T=n(13),S=n.n(T),I=n(14),E=n.n(I),F=n(15),P=n.n(F);const W=Object(g.styled)("div")(({theme:e})=>({position:"relative",overflow:"hidden","& .rs__table_loading":{background:"#ffffff70",position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:9,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}})),$=Object(g.styled)("div")(({resource_count:e})=>({position:"relative",display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,width:"100%",overflowX:"auto",overflowY:"hidden"})),N=Object(g.styled)("div")(({days:e,indent:t="1",theme:n})=>({position:"relative",display:"grid",gridTemplateColumns:+t>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,[n.breakpoints.down("sm")]:{gridTemplateColumns:+t>0?`30px repeat(${e}, 1fr)`:""},"&:first-of-type":{borderStyle:"solid",borderColor:"#eee",borderWidth:"0 1px 1px 0"},"& .rs__cell":{position:"relative","&.rs__header > :first-of-type":{padding:"2px 5px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",[n.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},borderColor:"#eee",borderWidth:"1px 0px 0px 1px",borderStyle:"solid","& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:Object(g.alpha)(n.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}}})),q=Object(g.styled)("div")(()=>({minWidth:400,maxWidth:"95%","& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between"}}}));var H=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const R=({event:e,multiday:t,hasPrev:n,hasNext:s,showdate:o})=>{const{triggerDialog:c,onDelete:d,events:l,handleState:j,triggerLoading:u,viewerExtraComponent:b,fields:v,direction:O,resources:h,resourceFields:p,locale:y,viewerTitleComponent:m}=f(),[w,D]=Object(r.useState)(null),[k,T]=Object(r.useState)(!1),I=Object(g.useTheme)(),F="rtl"===O?_.a:x.a,W="rtl"===O?x.a:_.a,$=e=>{!e&&k&&T(!1),D(e||null)},N=()=>H(void 0,void 0,void 0,(function*(){try{u(!0);let t=e.event_id;if(d){const e=yield d(t);t=e||""}if(t){const e=l.filter(e=>e.event_id!==t);j(e,"events"),$()}}catch(e){console.error(e)}finally{u(!1)}}));let R=Object(i.jsxs)("div",Object.assign({style:{padding:2}},{children:[Object(i.jsx)(g.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title}),void 0),o&&Object(i.jsx)(g.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${Object(a.format)(e.start,"hh:mm a",{locale:y})} - ${Object(a.format)(e.end,"hh:mm a",{locale:y})}`}),void 0)]}),void 0);t&&(R=Object(i.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[Object(i.jsx)(g.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:n?Object(i.jsx)(W,{fontSize:"small",sx:{display:"flex"}},void 0):o&&Object(a.format)(e.start,"hh:mm a",{locale:y})}),void 0),Object(i.jsx)(g.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title}),void 0),Object(i.jsx)(g.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?Object(i.jsx)(F,{fontSize:"small",sx:{display:"flex"}},void 0):o&&Object(a.format)(e.end,"hh:mm a",{locale:y})}),void 0)]}),void 0));return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(g.Paper,Object.assign({style:{width:"100%",height:"100%",display:"block",background:e.disabled?"#d0d0d0":e.color||I.palette.primary.main,color:e.disabled?"#808080":I.palette.primary.contrastText,cursor:e.disabled?"not-allowed":"pointer",overflow:"hidden"}},{children:Object(i.jsx)(g.ButtonBase,Object.assign({onClick:e=>{e.preventDefault(),e.stopPropagation(),$(e.currentTarget)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"}},{children:Object(i.jsx)("div",Object.assign({style:{height:"100%"},draggable:!0,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",""+e.event_id),t.currentTarget.style.backgroundColor=I.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||I.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}},{children:R}),void 0)}),void 0)}),void 0),Object(i.jsx)(g.Popover,Object.assign({open:Boolean(w),anchorEl:w,onClose:e=>{$()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:(()=>{const t=p.idField,n=h.filter(n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]);return Object(i.jsxs)(q,{children:[Object(i.jsxs)("div",Object.assign({style:{background:e.color||I.palette.primary.main,color:I.palette.primary.contrastText}},{children:[Object(i.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[Object(i.jsx)("div",{children:Object(i.jsx)(g.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>{$()}},{children:Object(i.jsx)(E.a,{color:"disabled"},void 0)}),void 0)},void 0),Object(i.jsxs)("div",Object.assign({style:{display:"inherit"}},{children:[Object(i.jsx)(g.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>{$(),c(!0,e)}},{children:Object(i.jsx)(C.a,{},void 0)}),void 0),!k&&Object(i.jsx)(g.IconButton,Object.assign({size:"small",style:{color:I.palette.primary.contrastText},onClick:()=>T(!0)},{children:Object(i.jsx)(M.a,{},void 0)}),void 0),Object(i.jsx)(g.Slide,Object.assign({in:k,direction:"rtl"===O?"right":"left",mountOnEnter:!0,unmountOnExit:!0},{children:Object(i.jsxs)("div",{children:[Object(i.jsx)(g.Button,Object.assign({style:{color:I.palette.error.main},size:"small",onClick:N},{children:"DELETE"}),void 0),Object(i.jsx)(g.Button,Object.assign({style:{color:I.palette.action.disabled},size:"small",onClick:()=>T(!1)},{children:"CANCEL"}),void 0)]},void 0)}),void 0)]}),void 0)]}),void 0),m instanceof Function?m(e):Object(i.jsx)(g.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}),void 0)]}),void 0),Object(i.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[Object(i.jsxs)(g.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[Object(i.jsx)(S.a,{},void 0)," ",`${Object(a.format)(e.start,"dd MMMM yyyy hh:mm a",{locale:y})} - ${Object(a.format)(e.end,"dd MMMM yyyy hh:mm a",{locale:y})}`]}),void 0),n.length>0&&Object(i.jsxs)(g.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[Object(i.jsx)(P.a,{},void 0)," ",n.map(e=>e[p.textField]).join(", ")]}),void 0),b instanceof Function?b(v,e):b]}),void 0)]},void 0)})()}),void 0)]},void 0)};R.defaultProps={multiday:!1,showdate:!0};var B=R;const z=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:n,resources:a,direction:s,resourceViewMode:o}=f(),{width:c}=function(){const[e,t]=Object(r.useState)({width:0,height:0});return Object(r.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{t(e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e})};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}},[]),e}(),d=e[n.textField],l=e[n.subTextField||""],j=e[n.avatarField||""],u=e[n.colorField||""];if(t instanceof Function)return t(e);const b="tabs"===o?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return Object(i.jsxs)(g.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===s?"right":"left"},b),component:"span"},{children:[Object(i.jsx)(g.ListItemAvatar,{children:Object(i.jsx)(g.Avatar,{style:{background:u},alt:d,src:j},void 0)},void 0),Object(i.jsx)(g.ListItemText,{primary:Object(i.jsx)(g.Typography,Object.assign({variant:"body2",noWrap:!0},{children:d}),void 0),secondary:Object(i.jsx)(g.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:l}),void 0),style:{width:c/(a.length+1)}},void 0)]}),void 0)};var A=n(5),L=n.n(A),V=n(16),G=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function K(e){const{children:t,value:n,index:r}=e,a=G(e,["children","value","index"]);return n===r?Object(i.jsx)(g.Box,Object.assign({},a,{children:t}),void 0):Object(i.jsx)(i.Fragment,{},void 0)}K.propTypes={children:L.a.node,index:L.a.any.isRequired,value:L.a.any.isRequired};const Q=Object(V.styled)("div")(({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px","& button.MuiTab-root":{borderRight:"1px solid #eee"}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}})),X=({tabs:e,variant:t,tab:n,setTab:r,indicator:a,style:s})=>Object(i.jsxs)(Q,Object.assign({style:s},{children:[Object(i.jsx)(g.Tabs,Object.assign({value:n,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:a}},{children:e.map((e,t)=>{return Object(i.jsx)(g.Tab,Object.assign({label:e.label,value:e.id},{id:"scrollable-auto-tab-"+(n=e.id),"aria-controls":"scrollable-auto-tabpanel-"+n},{onClick:()=>r(e.id),onDragEnter:()=>r(e.id)}),e.id||t);var n})}),void 0),e.map((e,t)=>e.component&&Object(i.jsx)(K,Object.assign({value:n,index:e.id},{children:e.component}),t))]}),void 0);X.defaultProps={variant:"scrollable",indicator:"primary"};const Z=({renderChildren:e})=>{const{resourceViewMode:t}=f();return"tabs"===t?Object(i.jsx)(Y,{renderChildren:e},void 0):Object(i.jsx)(U,{renderChildren:e},void 0)},U=({renderChildren:e})=>{const{resources:t,resourceFields:n}=f();return Object(i.jsx)(i.Fragment,{children:t.map((t,r)=>Object(i.jsxs)("div",{children:[Object(i.jsx)(z,{resource:t},void 0),e(t)]},`${t[n.idField]}_${r}`))},void 0)},Y=({renderChildren:e})=>{const{resources:t,resourceFields:n,selectedResource:r,handleState:a}=f(),s=t.map(t=>({id:t[n.idField],label:Object(i.jsx)(z,{resource:t},void 0),component:Object(i.jsx)(i.Fragment,{children:e(t)},void 0)}));return Object(i.jsx)(X,{tabs:s,tab:r||t[0][n.idField],setTab:e=>{a(e,"selectedResource")},style:{display:"grid"}},void 0)};Z.defaultProps={span:1};const J=({start:e,end:t,resourceKey:n,resourceVal:r,children:a})=>{const{triggerDialog:s,onDrop:o}=f(),c=Object(g.useTheme)();return Object(i.jsx)(g.Button,Object.assign({fullWidth:!0,onClick:()=>{s(!0,{start:e,end:t,[n]:r})},onDragOver:e=>{e.currentTarget.style.backgroundColor=Object(g.alpha)(c.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=Object(g.alpha)(c.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const i=t.dataTransfer.getData("text");o(i,e,n,r)}},{children:a}),void 0)};var ee=({todayEvents:e,today:t,startHour:n,step:s,minuteHeight:o,direction:c})=>{const d=[];return Object(i.jsx)(r.Fragment,{children:e.map((r,l)=>{const j=Object(a.differenceInMinutes)(r.end,r.start)*o,u=Object(a.differenceInMinutes)(r.start,Object(a.setHours)(t,n)),b=u*o+(u/s+1),v=((e,t)=>e.filter(e=>e.event_id!==t.event_id&&(Object(a.isWithinInterval)(Object(a.addMinutes)(t.start,1),{start:e.start,end:e.end})||Object(a.isWithinInterval)(Object(a.addMinutes)(t.end,-1),{start:e.start,end:e.end})||Object(a.isWithinInterval)(Object(a.addMinutes)(e.start,1),{start:t.start,end:t.end})||Object(a.isWithinInterval)(Object(a.addMinutes)(e.end,-1),{start:t.start,end:t.end}))))(e,r),O=v.filter(e=>d.includes(e.event_id));return d.push(r.event_id),Object(i.jsx)("div",Object.assign({className:"rs__event__item",style:{height:j,top:b,width:v.length?100/(v.length+1)+"%":"95%",["rtl"===c?"right":"left"]:O.length>0?`calc(100%/${O.length+1})`:""}},{children:Object(i.jsx)(B,{event:r},void 0)}),r.event_id)})},void 0)},te=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const ne=()=>{const{week:e,selectedDate:t,height:n,events:s,triggerDialog:l,handleGotoDay:j,remoteEvents:u,triggerLoading:b,handleState:v,resources:O,resourceFields:h,fields:p,direction:m,locale:x}=f(),{weekStartOn:w,weekDays:_,startHour:D,endHour:C,step:k,cellRenderer:M}=e,T=Object(a.startOfWeek)(t,{weekStartsOn:w}),S=_.map(e=>Object(a.addDays)(T,e)),I=Object(a.startOfDay)(S[0]),E=Object(a.endOfDay)(S[S.length-1]),F=Object(a.setMinutes)(Object(a.setHours)(t,D),0),P=Object(a.setMinutes)(Object(a.setHours)(t,C),0),W=Object(a.eachMinuteOfInterval)({start:F,end:P},{step:k}),$=d(n,W.length),q=c($,k),H=Object(r.useCallback)(()=>te(void 0,void 0,void 0,(function*(){try{b(!0);const e=`?start=${I}&end=${E}`,t=yield u(e);Array.isArray(t)&&v(t,"events")}catch(e){throw e}finally{b(!1)}})),[t]);Object(r.useEffect)(()=>{u instanceof Function&&H()},[H]);const R=(e,t)=>{const n=Object(a.isSameDay)(I,t);return e.filter(e=>Object(a.differenceInDays)(e.end,e.start)>0&&S.some(t=>Object(a.isWithinInterval)(t,{start:Object(a.startOfDay)(e.start),end:Object(a.endOfDay)(e.end)}))).filter(e=>Object(a.isBefore)(e.start,I)?n:Object(a.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime()).map((r,s)=>{const o=Object(a.isBefore)(Object(a.startOfDay)(r.start),I),c=Object(a.isAfter)(Object(a.endOfDay)(r.end),E),d=Object(a.differenceInDays)(c?E:r.end,o?I:r.start)+1,l=e.filter(e=>!n&&(e.event_id!==r.event_id&&Object(a.isWithinInterval)(t,{start:e.start,end:e.end})));let j=s;return l.length&&(j+=l.length),Object(i.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*j+45,width:100*d+"%"}},{children:Object(i.jsx)(B,{event:r,hasPrev:o,hasNext:c,multiday:!0},void 0)}),r.event_id)})},z=e=>{let t=s;e&&(t=o(s,e,h,p));const n=28*s.filter(e=>Object(a.differenceInDays)(e.end,e.start)>0&&S.some(t=>Object(a.isWithinInterval)(t,{start:Object(a.startOfDay)(e.start),end:Object(a.endOfDay)(e.end)}))).length+45;return Object(i.jsxs)(N,Object.assign({days:S.length},{children:[Object(i.jsx)("span",{className:"rs__cell"},void 0),S.map((e,r)=>Object(i.jsxs)("span",Object.assign({className:"rs__cell rs__header "+(Object(a.isToday)(e)?"rs__today_cell":""),style:{height:n}},{children:[Object(i.jsx)(y,{date:e,onClick:j,locale:x},void 0),R(t,e)]}),r)),W.map((n,s)=>Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)("span",Object.assign({style:{height:$},className:"rs__cell rs__header rs__time"},{children:Object(i.jsx)(g.Typography,Object.assign({variant:"caption"},{children:Object(a.format)(n,"hh:mm a",{locale:x})}),void 0)}),void 0),S.map((r,o)=>{const c=new Date(`${Object(a.format)(r,"yyyy/MM/dd")} ${Object(a.format)(n,"hh:mm a")}`),d=new Date(`${Object(a.format)(r,"yyyy/MM/dd")} ${Object(a.format)(Object(a.addMinutes)(n,k),"hh:mm a")}`),j=h.idField;return Object(i.jsxs)("span",Object.assign({className:"rs__cell "+(Object(a.isToday)(r)?"rs__today_cell":"")},{children:[0===s&&Object(i.jsx)(ee,{todayEvents:t.filter(e=>Object(a.isSameDay)(r,e.start)&&!Object(a.differenceInDays)(e.end,e.start)).sort((e,t)=>e.end.getTime()-t.end.getTime()),today:r,minuteHeight:q,startHour:D,step:k,direction:m},void 0),M?M({day:r,start:c,end:d,height:$,onClick:()=>l(!0,{start:c,end:d,[j]:e?e[j]:null}),[j]:e?e[j]:null}):Object(i.jsx)(J,{start:c,end:d,resourceKey:j,resourceVal:e?e[j]:null},void 0)]}),o)})]},s))]}),void 0)};return O.length?Object(i.jsx)(Z,{renderChildren:z},void 0):z()};var ie=n(17),re=n.n(ie),ae=n(18),se=n.n(ae);var oe=({children:e})=>{const{locale:t}=f();return Object(i.jsx)(re.a,Object.assign({dateAdapter:se.a,locale:t},{children:e}),void 0)},ce=n(4),de=n.n(ce),le=n(9),je=n.n(le),ue=n(6),be=n.n(ue);const ve=({type:e,onClick:t})=>{const{direction:n}=f();let r=be.a;return"prev"===e?r="rtl"===n?be.a:je.a:"next"===e&&(r="rtl"===n?je.a:be.a),Object(i.jsx)(g.IconButton,Object.assign({style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()}},{children:Object(i.jsx)(r,{},void 0)}),void 0)},Oe=({selectedDate:e,onChange:t,weekProps:n})=>{const{locale:s}=f(),[o,c]=Object(r.useState)(!1),{weekStartOn:d}=n,l=Object(a.startOfWeek)(e,{weekStartsOn:d}),j=Object(a.endOfWeek)(e,{weekStartsOn:d}),u=()=>c(!o);return Object(i.jsxs)("div",{children:[Object(i.jsx)(ve,{type:"prev",onClick:()=>{const e=Object(a.addDays)(l,-1);t(e,"selectedDate")}},void 0),Object(i.jsx)(oe,{children:Object(i.jsx)(de.a,{open:o,onClose:u,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:e=>Object(i.jsx)(g.Button,Object.assign({ref:e.inputRef,style:{padding:4},onClick:u},{children:`${Object(a.format)(l,"dd",{locale:s})} - ${Object(a.format)(j,"dd MMMM yyyy",{locale:s})}`}),void 0)},void 0)},void 0),Object(i.jsx)(ve,{type:"next",onClick:()=>{const e=Object(a.addDays)(j,1);t(e,"selectedDate")}},void 0)]},void 0)},he=({selectedDate:e,onChange:t})=>{const{locale:n}=f(),[s,o]=Object(r.useState)(!1),c=()=>o(!s);return Object(i.jsxs)("div",{children:[Object(i.jsx)(ve,{type:"prev",onClick:()=>{const n=Object(a.addDays)(e,-1);t(n,"selectedDate")}},void 0),Object(i.jsx)(oe,{children:Object(i.jsx)(de.a,{open:s,onClose:c,openTo:"day",views:["month","day"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>Object(i.jsx)(g.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:c},{children:""+Object(a.format)(e,"dd, MMMM yyyy",{locale:n})}),void 0)},void 0)},void 0),Object(i.jsx)(ve,{type:"next",onClick:()=>{const n=Object(a.addDays)(e,1);t(n,"selectedDate")}},void 0)]},void 0)},pe=({selectedDate:e,onChange:t})=>{const{locale:n}=f(),[s,o]=Object(r.useState)(!1),c=Object(a.getMonth)(e),d=()=>o(!s);return Object(i.jsxs)("div",{children:[Object(i.jsx)(ve,{type:"prev",onClick:()=>{const n=c-1;t(Object(a.setMonth)(e,n),"selectedDate")}},void 0),Object(i.jsx)(oe,{children:Object(i.jsx)(de.a,{open:s,onClose:d,openTo:"month",views:["year","month"],value:e,onChange:(e,n)=>{t(e||new Date,"selectedDate")},renderInput:t=>Object(i.jsx)(g.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:d},{children:Object(a.format)(e,"MMMM yyyy",{locale:n})}),void 0)},void 0)},void 0),Object(i.jsx)(ve,{type:"next",onClick:()=>{const n=c+1;t(Object(a.setMonth)(e,n),"selectedDate")}},void 0)]},void 0)};var ge=n(19),ye=n.n(ge);const fe=()=>{const{selectedDate:e,view:t,week:n,handleState:a,getViews:s}=f(),[o,c]=Object(r.useState)(null),d=Object(g.useTheme)(),l=Object(g.useMediaQuery)(d.breakpoints.up("sm")),j=s(),u=e=>{c(e||null)};return Object(i.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(()=>{switch(t){case"month":return Object(i.jsx)(pe,{selectedDate:e,onChange:a},void 0);case"week":return Object(i.jsx)(Oe,{selectedDate:e,onChange:a,weekProps:n},void 0);case"day":return Object(i.jsx)(he,{selectedDate:e,onChange:a},void 0);default:return""}})(),Object(i.jsxs)("div",{children:[Object(i.jsx)(g.Button,Object.assign({onClick:()=>a(new Date,"selectedDate")},{children:"Today"}),void 0),j.length>1&&(l?j.map(e=>Object(i.jsx)(g.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>a(e,"view"),onDragOver:t=>{t.preventDefault(),a(e,"view")}},{children:e}),e)):Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(g.IconButton,Object.assign({style:{padding:5},onClick:e=>{u(e.currentTarget)}},{children:Object(i.jsx)(ye.a,{},void 0)}),void 0),Object(i.jsx)(g.Popover,Object.assign({open:Boolean(o),anchorEl:o,onClose:e=>{u()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:Object(i.jsx)(g.MenuList,Object.assign({autoFocusItem:!!o,disablePadding:!0},{children:j.map(e=>Object(i.jsx)(g.MenuItem,Object.assign({selected:e===t,onClick:()=>{u(),a(e,"view")}},{children:e}),e))}),void 0)}),void 0)]},void 0))]},void 0)]}),void 0)};var me=n(20),xe=n.n(me);const we=({type:e,value:t,label:n,name:r,onChange:a,variant:s,modalVariant:o,error:c,errMsg:d})=>{const l="date"===e?de.a:xe.a;return Object(i.jsx)(oe,{children:Object(i.jsx)(l,{value:t,label:n,onChange:e=>a(r,new Date(e||"")),minutesStep:5,renderInput:e=>Object(i.jsx)(g.TextField,Object.assign({variant:s,helperText:c?d:"",error:c,style:{width:"100%"}},e),void 0)},void 0)},void 0)};we.defaultProps={type:"datetime",variant:"outlined",modalVariant:"inline"};const _e=({variant:e,label:t,placeholder:n,value:a,name:s,required:o,min:c,max:d,email:l,decimal:j,onChange:u,disabled:b,multiline:v,rows:O,touched:h})=>{const[p,y]=Object(r.useState)({touched:!1,valid:!1,errorMsg:""});Object(r.useEffect)(()=>{h&&f(a)},[h]);const f=e=>{let t=e,n=!0,i="";if(l){n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,i="Invalid Email"}if(j){n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,i="Only Numbers Allowed"}c&&(""+t).trim().length<c&&(n=!1,i=`Minimum ${c} letters`),d&&(""+t).trim().length>d&&(n=!1,i=`Maximum ${d} letters`),o&&(""+t).trim().length<=0&&(n=!1,i="Required"),y({touched:!0,valid:n,errorMsg:i}),u(s,t,n)};return Object(i.jsx)(g.TextField,{variant:e,label:t&&Object(i.jsx)(g.Typography,Object.assign({variant:"body2"},{children:`${t} ${o?"*":""}`}),void 0),value:a,name:s,onChange:e=>f(e.target.value),disabled:b,error:p.touched&&!p.valid,helperText:p.touched&&!p.valid&&p.errorMsg,multiline:v,rows:O,style:{width:"100%"},InputProps:{placeholder:n||""}},void 0)};_e.defaultProps={variant:"outlined"};var De=n(21),Ce=n.n(De);const ke=({options:e,value:t,name:n,required:a,onChange:s,label:o,disabled:c,touched:d,variant:l,loading:j,multiple:u,placeholder:b,errMsg:v})=>{const O=Object(g.useTheme)(),[h,p]=Object(r.useState)({touched:!1,valid:!!t,errorMsg:v||(a?"Required":void 0)});Object(r.useEffect)(()=>{d&&y(t)},[d]);const y=e=>{let t=e,i=!0,r=v;!a||(u?t.length:t)||(i=!1,r="Required"),p(e=>Object.assign(Object.assign({},e),{touched:!0,valid:i,errorMsg:r})),s(n,t,i)};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(g.FormControl,Object.assign({variant:l||"outlined",fullWidth:!0,error:a&&h.touched&&!h.valid,disabled:c},{children:[o&&Object(i.jsx)(g.InputLabel,Object.assign({id:"input_"+n},{children:Object(i.jsx)(g.Typography,Object.assign({variant:"body2"},{children:`${o} ${a?"*":""}`}),void 0)}),void 0),Object(i.jsxs)(g.Select,Object.assign({label:o,labelId:"input_"+n,value:t,onBlur:()=>{h.touched||p(e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:v||e.errorMsg}))},onChange:e=>y(e.target.value),IconComponent:j?()=>Object(i.jsx)(g.CircularProgress,{size:5},void 0):Ce.a,multiple:!!u,classes:{select:"chips"===u?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return Object(i.jsx)("em",{children:o},void 0);let n=[];if(u){for(const i of e)t.includes(i.value)&&n.push([i.text]);return"chips"===u?n.map((e,t)=>Object(i.jsx)(g.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`)):n.join(",")}for(const i of e)t===i.value&&n.push([i.text]);return n.join(",")}},{children:[b&&Object(i.jsx)(g.MenuItem,Object.assign({value:""},{children:Object(i.jsx)("em",{children:b},void 0)}),void 0),e.map(e=>Object(i.jsxs)(g.MenuItem,Object.assign({value:e.value},{children:[u&&Object(i.jsx)(g.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"},void 0),e.text]}),e.id||e.value))]}),void 0)]}),void 0),Object(i.jsx)(g.FormHelperText,Object.assign({style:{color:O.palette.error.main}},{children:h.touched&&!h.valid&&h.errorMsg}),void 0)]},void 0)};ke.defaultProps={variant:"outlined"};var Me=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const Te=(e,t)=>{var n;const i={};for(const r of e){const e=s(r,r.default,t),a=s(r,null==t?void 0:t[r.name],t);i[r.name]={value:a.value||e.value||"",validity:!(null===(n=r.config)||void 0===n?void 0:n.required)||(!!a.validity||!!e.validity),type:r.type,config:r.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},i)};var Se=()=>{const{fields:e,dialog:t,triggerDialog:n,selectedRange:s,selectedEvent:o,triggerLoading:c,onConfirm:d,customEditor:l,confirmEvent:j,dialogMaxWidth:u}=f(),[b,v]=Object(r.useState)(Te(e,o||s)),[O,h]=Object(r.useState)(!1),p=Object(g.useTheme)(),y=Object(g.useMediaQuery)(p.breakpoints.down("sm")),m=(e,t,n)=>{v(i=>Object.assign(Object.assign({},i),{[e]:Object.assign(Object.assign({},i[e]),{value:t,validity:n})}))},x=t=>{t&&v(Te(e)),n(!1)},w=()=>Me(void 0,void 0,void 0,(function*(){let e={};for(const t in b)if(e[t]=b[t].value,!l&&!b[t].validity)return h(!0);try{c(!0),e.end=e.start>=e.end?Object(a.addMinutes)(e.start,Object(a.differenceInMinutes)(null==s?void 0:s.end,null==s?void 0:s.start)):e.end;const t=(null==o?void 0:o.event_id)?"edit":"create";d?e=yield d(e,t):e.event_id=(null==o?void 0:o.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),j(e,t),x(!0)}catch(e){console.error(e)}finally{c(!1)}})),_=t=>{const n=b[t];switch(n.type){case"input":return Object(i.jsx)(_e,Object.assign({value:n.value,name:t,onChange:m,touched:O},n.config),void 0);case"date":return Object(i.jsx)(we,Object.assign({value:n.value,name:t,onChange:(...e)=>m(...e,!0)},n.config),void 0);case"select":const r=e.find(e=>e.name===t);return Object(i.jsx)(ke,Object.assign({value:n.value,name:t,options:(null==r?void 0:r.options)||[],onChange:m,touched:O},n.config),void 0);default:return""}};return Object(i.jsx)(g.Dialog,Object.assign({open:t,fullScreen:y,maxWidth:u},{children:(()=>{if(l){return l({state:b,close:()=>n(!1),loading:e=>c(e),edited:o,onConfirm:j})}return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(g.DialogTitle,{children:o?"Edit Event":"Add Event"},void 0),Object(i.jsx)(g.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:Object(i.jsx)(g.Grid,Object.assign({container:!0,spacing:1},{children:Object.keys(b).map(e=>{var t;const n=b[e];return Object(i.jsx)(g.Grid,Object.assign({item:!0,sm:null===(t=n.config)||void 0===t?void 0:t.sm,xs:12},{children:_(e)}),e)})}),void 0)}),void 0),Object(i.jsxs)(g.DialogActions,{children:[Object(i.jsx)(g.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>x()},{children:"Cancel"}),void 0),Object(i.jsx)(g.Button,Object.assign({color:"primary",fullWidth:!0,onClick:w},{children:"Confirm"}),void 0)]},void 0)]},void 0)})()}),void 0)};var Ie=({events:e,today:t,eachWeekStart:n,daysList:s,onViewMore:o,cellHeight:c})=>{const d=Math.round((c-27)/28-1),l=n.some(e=>Object(a.isSameDay)(e,t))?t:null,j=e.filter(e=>!(!l||!Object(a.isWithinInterval)(l,{start:Object(a.startOfDay)(e.start),end:Object(a.endOfDay)(e.end)}))||Object(a.isSameDay)(e.start,t)).sort((e,t)=>t.end.getTime()-e.end.getTime());return Object(i.jsx)(r.Fragment,{children:j.map((r,c)=>{const u=!!l&&Object(a.isBefore)(r.start,l),b=u&&l?l:r.start;let v=Object(a.differenceInDays)(r.end,b)+1;const O=v>=s.length;if(O){const e=Object(a.startOfWeek)(r.start),t=Object(a.closestTo)(e,n);t&&(v=s.length-(l?0:Object(a.differenceInDays)(r.start,t)))}const h=e.filter(e=>!l&&e.event_id!==r.event_id&&d>c&&Object(a.isBefore)(e.start,Object(a.startOfDay)(t))&&Object(a.isAfter)(e.end,Object(a.startOfDay)(t)));let p=c;h.length&&(p+=h.length);const y=28*p+27;return p>d?"":p===d?Object(i.jsx)(g.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:y,fontSize:11},onClick:e=>{e.stopPropagation(),o(r.start)}},{children:Math.abs(j.length-c)+" More..."}),c):Object(i.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:y,width:100*v+"%"}},{children:Object(i.jsx)(B,{event:r,showdate:!1,multiday:Object(a.differenceInDays)(r.end,r.start)>0,hasPrev:u,hasNext:O},void 0)}),c)})},void 0)},Ee=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const Fe=()=>{const{month:e,selectedDate:t,height:n,events:s,handleGotoDay:c,remoteEvents:d,triggerLoading:l,triggerDialog:j,handleState:u,resources:b,resourceFields:v,fields:O,locale:h}=f(),{weekStartOn:p,weekDays:y,startHour:m,endHour:x,cellRenderer:w}=e,_=Object(a.startOfMonth)(t),D=Object(a.endOfMonth)(t),C=Object(a.eachWeekOfInterval)({start:_,end:D},{weekStartsOn:p}),k=y.map(e=>Object(a.addDays)(C[0],e)),M=n/C.length,T=Object(g.useTheme)(),S=Object(r.useCallback)(()=>Ee(void 0,void 0,void 0,(function*(){try{l(!0);const e=C[0],t=`?start=${e}&end=${Object(a.addDays)(C[C.length-1],k.length)}`,n=yield d(t);n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{l(!1)}})),[t]);Object(r.useEffect)(()=>{d instanceof Function&&S()},[S]);const I=e=>{let n=s;e&&(n=o(s,e,v,O));const d=[];for(const s of C){const o=y.map(o=>{const d=Object(a.addDays)(s,o),l=new Date(""+Object(a.format)(Object(a.setHours)(d,m),"yyyy/MM/dd hh:mm a")),u=new Date(""+Object(a.format)(Object(a.setHours)(d,x),"yyyy/MM/dd hh:mm a")),b=v.idField;return Object(i.jsxs)("span",Object.assign({style:{height:M},className:"rs__cell"},{children:[w?w({day:t,start:l,end:u,height:M,onClick:()=>j(!0,{start:l,end:u,[b]:e?e[b]:null}),[b]:e?e[b]:null}):Object(i.jsx)(J,{start:l,end:u,resourceKey:b,resourceVal:e?e[b]:null},void 0),Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(g.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:Object(a.isToday)(d)?T.palette.secondary.main:"transparent",color:Object(a.isToday)(d)?T.palette.secondary.contrastText:"",marginBottom:2}},{children:Object(i.jsx)(g.Typography,Object.assign({color:Object(a.isSameMonth)(d,_)?"textPrimary":"#ccc",className:"rs__hover__op",onClick:e=>{e.stopPropagation(),c(d)}},{children:Object(a.format)(d,"dd")}),void 0)}),void 0),Object(i.jsx)(Ie,{events:n,today:d,eachWeekStart:C,daysList:k,onViewMore:c,cellHeight:M},void 0)]},void 0)]}),o.toString())});d.push(Object(i.jsx)(r.Fragment,{children:o},s.toString()))}return d},E=e=>Object(i.jsxs)(N,Object.assign({days:k.length,indent:"0"},{children:[k.map((e,t)=>Object(i.jsx)("span",Object.assign({className:"rs__cell rs__header"},{children:Object(i.jsx)(g.Typography,Object.assign({align:"center",variant:"body2"},{children:Object(a.format)(e,"EE",{locale:h})}),void 0)}),t)),I(e)]}),void 0);return b.length?Object(i.jsx)(Z,{renderChildren:E},void 0):E()};var Pe=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};const We=()=>{const{day:e,selectedDate:t,events:n,height:s,triggerDialog:l,remoteEvents:j,triggerLoading:u,handleState:b,resources:v,resourceFields:O,fields:h,direction:p,locale:m}=f(),{startHour:x,endHour:w,step:_,cellRenderer:D}=e,C=Object(a.setMinutes)(Object(a.setHours)(t,x),0),k=Object(a.setMinutes)(Object(a.setHours)(t,w),0),M=Object(a.eachMinuteOfInterval)({start:C,end:k},{step:_}),T=d(s,M.length),S=c(T,_),I=n.sort((e,t)=>t.end.getTime()-e.end.getTime()),E=Object(r.useCallback)(()=>Pe(void 0,void 0,void 0,(function*(){try{u(!0);const e=Object(a.addDays)(C,-1),t=`?start=${e}&end=${Object(a.addDays)(k,1)}`,n=yield j(t);n&&(null==n?void 0:n.length)&&b(n,"events")}catch(e){throw e}finally{u(!1)}})),[t]);Object(r.useEffect)(()=>{j instanceof Function&&E()},[E]);const F=e=>{const n=e.filter(e=>Object(a.differenceInDays)(e.end,e.start)>0&&Object(a.isWithinInterval)(t,{start:Object(a.startOfDay)(e.start),end:Object(a.endOfDay)(e.end)}));return Object(i.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*n.length}},{children:n.map((e,n)=>{const r=Object(a.isBefore)(e.start,Object(a.startOfDay)(t)),s=Object(a.isAfter)(e.end,Object(a.endOfDay)(t));return Object(i.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*n,width:"100%"}},{children:Object(i.jsx)(B,{event:e,multiday:!0,hasPrev:r,hasNext:s},void 0)}),e.event_id)})}),void 0)},P=e=>{let s=I;e&&(s=o(I,e,O,h));const c=28*n.filter(e=>Object(a.differenceInDays)(e.end,e.start)>0&&Object(a.isWithinInterval)(t,{start:Object(a.startOfDay)(e.start),end:Object(a.endOfDay)(e.end)})).length+45;return Object(i.jsxs)(N,Object.assign({days:1},{children:[Object(i.jsx)("span",{className:"rs__cell"},void 0),Object(i.jsxs)("span",Object.assign({className:"rs__cell rs__header "+(Object(a.isToday)(t)?"rs__today_cell":""),style:{height:c}},{children:[Object(i.jsx)(y,{date:t,locale:m},void 0),F(s)]}),void 0),M.map((n,o)=>{const c=new Date(`${Object(a.format)(t,"yyyy/MM/dd")} ${Object(a.format)(n,"hh:mm a")}`),d=new Date(`${Object(a.format)(t,"yyyy/MM/dd")} ${Object(a.format)(Object(a.addMinutes)(n,_),"hh:mm a")}`),j=O.idField;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:T}},{children:Object(i.jsx)(g.Typography,Object.assign({variant:"caption"},{children:Object(a.format)(n,"hh:mm a",{locale:m})}),void 0)}),void 0),Object(i.jsxs)("span",Object.assign({className:"rs__cell "+(Object(a.isToday)(t)?"rs__today_cell":"")},{children:[0===o&&Object(i.jsx)(ee,{todayEvents:s.filter(e=>!Object(a.differenceInDays)(e.end,e.start)&&Object(a.isSameDay)(t,e.start)),today:t,minuteHeight:S,startHour:x,step:_,direction:p},void 0),D?D({day:t,start:c,end:d,height:T,onClick:()=>l(!0,{start:c,end:d,[j]:e?e[j]:null}),[j]:e?e[j]:null}):Object(i.jsx)(J,{start:c,end:d,resourceKey:j,resourceVal:e?e[j]:null},void 0)]}),void 0)]},o)})]}),void 0)};return v.length?Object(i.jsx)(Z,{span:2,renderChildren:P},void 0):P()},$e=()=>{const{loading:e,view:t,dialog:n,resources:a,resourceViewMode:s}=f(),o=Object(r.useMemo)(()=>{switch(t){case"month":return Object(i.jsx)(Fe,{},void 0);case"week":return Object(i.jsx)(ne,{},void 0);case"day":return Object(i.jsx)(We,{},void 0);default:return""}},[t]);return Object(i.jsxs)(W,{children:[e&&Object(i.jsx)("div",Object.assign({className:"rs__table_loading"},{children:Object(i.jsxs)("span",{children:[Object(i.jsx)(g.CircularProgress,{size:50},void 0),Object(i.jsx)(g.Typography,Object.assign({align:"center"},{children:"Loading..."}),void 0)]},void 0)}),void 0),Object(i.jsx)(fe,{},void 0),Object(i.jsx)("div",Object.assign({className:"rs__outer_table"},{children:Object(i.jsx)($,Object.assign({resource_count:"tabs"===s?1:a.length},{children:o}),void 0)}),void 0),n&&Object(i.jsx)(Se,{},void 0)]},void 0)},Ne=e=>Object(i.jsx)(p,Object.assign({initial:e},{children:Object(i.jsx)($e,{},void 0)}),void 0);Ne.defaultProps=u}]);